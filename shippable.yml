language: none

env:
  - IMAGE_NAME=harryi3t/busybox

build:
  ci:
    - echo "Let's build some cool stuff"
    - sudo docker build --rm -t=$IMAGE_NAME:$BRANCH.$SHIPPABLE_BUILD_NUMBER .

  # post_ci:
  #   -  sudo docker push $IMAGE_NAME:quick.$SHIPPABLE_BUILD_NUMBER

integrations:
  hub:
    - integrationName: "docker"
      type: docker
      branches:
          only:
            - master
  notifications:
    # - integrationName: triggerImageResource
    #   type: webhook
    #   payload:
    #     - versionName=$BRANCH.$SHIPPABLE_BUILD_NUMBER
    #   branches:
    #     only:
    #       - master
    #   on_success: always
    #   on_failure: always
    #   on_start: always
    - integrationName: triggerFileResource
      type: webhook
      payload:
        - versionName=$BRANCH.$SHIPPABLE_BUILD_NUMBER
      branches:
        only:
          - master
      on_success: always
      on_failure: always
      on_start: always
